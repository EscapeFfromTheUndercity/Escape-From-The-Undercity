<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Escape from the Undercity</title>
  <style>
    /* EXACT header/nav styles copied from comic.html */
    body {
      background-color: black;
      color: white;
      font-family: monospace;
      margin: 0;
      padding: 0;
    }
    header {
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 40px; /* aligned with other pages */
    }
    h1 { font-size: 2.5rem; }
    nav { margin-top: 10px; }
    nav a {
      color: white;
      font-size: 1rem;
      margin: 0 10px;
      text-decoration: none;
    }
    nav a:hover { text-decoration: underline; }
    @media (min-width: 600px) {
      nav a { font-size: 1.6rem; padding: 8px 14px; }
    }

    /* Subscribe (simple) */
    .subscribe { margin: 40px 0 10px; text-align: center; }
    .subscribe h3 { color: yellow; font-size: 1.6rem; margin: 0 0 10px; }
    .subscribe form {
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    .subscribe input[type="email"] {
      padding: 10px; font-size: 1rem; font-family: monospace;
      border: 1px solid #ccc; border-radius: 4px; width: 240px; background:#fff; color:#000;
    }
    .subscribe button {
      padding: 10px 16px; font-size: 1rem; font-family: monospace;
      border: none; border-radius: 4px; background:#3da1ff; color:#000; cursor: pointer;
    }
    .subscribe button:hover { background:#2c8fe6; }

    /* Image */
    .hero { display:block; margin: 20px auto 0; max-width: 100%; height:auto; }
    @media (min-width:900px){ .hero { max-height: 520px; } }

    /* Music toggle preserved (if present on your site) */
    #musicToggle {
      position: fixed; left: 50%; bottom: 22px; transform: translateX(-50%);
      background: #222; color:#fff; border:1px solid #555; border-radius:6px;
      padding:10px 18px; cursor:pointer; font-family: monospace; z-index:10;
    }
  </style>
</head>
<body>
  <header>
    <h1>Escape from the Undercity</h1>
    <nav>
      <a href="index.html">Home</a> |
      <a href="comic.html">Comic</a> |
      <a href="about.html">About</a> |
      <a href="shop.html">Shop</a>
    </nav>
  </header>

  <div class="subscribe">
    <h3>Join the Resistance</h3>
    <form action="https://escapefromtheundercity.substack.com/subscribe" method="get" target="_blank" rel="noopener">
      <input type="email" name="email" placeholder="Your email..." required />
      <button type="submit">Subscribe</button>
    </form>
  </div>

  <!-- Use the same file name you use on other pages; change src if needed -->
  <img src="Smoke.gif" alt="Rising smoke over the Undercity" class="hero" />

  <!-- Optional: include the music toggle/audio only if you have them on other pages -->
  <audio id="bgm" loop preload="auto">
    <source src="escape_main_theme_21aug25.ogg?v=2" type="audio/ogg">
    <source src="escape_main_theme_21aug25.mp3?v=2" type="audio/mpeg">
  </audio>
  <button id="musicToggle" aria-pressed="true" style="display:none;">ðŸ”Š Music: On</button>
  <script>
    // Only run if audio sources exist; keep hidden if playback blocked
    (function(){
      const audio=document.getElementById('bgm');
      const btn=document.getElementById('musicToggle');
      if(!audio) return;
      const pref=localStorage.getItem('bgmPref');
      function setBtn(on){ btn.textContent=on?'ðŸ”Š Music: On':'ðŸ”‡ Music: Off'; btn.setAttribute('aria-pressed', on?'true':'false'); }
      async function start(){
        if(pref==='off'){ setBtn(false); btn.style.display='block'; return; }
        try{ await audio.play(); setBtn(true); localStorage.setItem('bgmPref','on'); btn.style.display='block'; }
        catch{ setBtn(false); btn.style.display='block'; }
      }
      btn.addEventListener('click', async ()=>{
        if(audio.paused){ try{ await audio.play(); setBtn(true); localStorage.setItem('bgmPref','on'); } catch{} }
        else { audio.pause(); setBtn(false); localStorage.setItem('bgmPref','off'); }
      });
      document.addEventListener('DOMContentLoaded', start);
    })();
  </script>
</body>
</html>
