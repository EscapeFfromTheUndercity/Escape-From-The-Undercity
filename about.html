<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>About - Escape from the Undercity</title>
  <style>
    body{background:#000;color:#fff;font-family:monospace;margin:0}
    header{text-align:center;display:flex;flex-direction:column;align-items:center;padding-top:40px}
    h1{font-size:2.5rem}
    nav{margin-top:10px}
    nav a{color:#fff;font-size:1rem;margin:0 10px;text-decoration:none}
    nav a:hover{text-decoration:underline}
    @media(min-width:600px){nav a{font-size:1.6rem;padding:8px 14px}}
    main{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding-top:60px;min-height:calc(100vh - 120px)}
    .content{margin:0 auto;width:90%;max-width:800px;line-height:1.8;text-align:left;font-size:1rem}
    .content p{color:yellow;animation:glowFlash 6s infinite ease-in-out}
    @keyframes glowFlash{0%{text-shadow:none}50%{text-shadow:0 0 10px yellow,0 0 20px yellow}100%{text-shadow:none}}
    @media(min-width:768px){.content{font-size:1.3rem;line-height:2}}
  </style>
</head>
<body style="background:#000;color:#fff">
  <header>
    <h1>Escape from the Undercity</h1>
    <nav>
      <a href="index.html">Home</a> |
      <a href="comic.html">Comic</a> |
      <a href="about.html">About</a> |
      <a href="shop.html">Shop</a>
    </nav>
  </header>

  <main>
    <div class="content">
      <p>It's all coming back to H now.....</p>
      <p>His girlfriend, Jane, was insistent; if they were to take the next step in their relationship, he had to address his negativity.</p>
      <p>H harboured deep misgivings about the City, especially its Government. But Jane was immoveable. So... he makes an appointment with the City Mental Resilience Support Team.</p>
      <p>He awakes in a room, amidst a pile of mostly dead bodies, killer robots entering to clean up what remains.</p> 
      <p>Now you're getting it H.  You weren't paranoid enough.  Who cancelled the Hippocratic Oath and Patient Consent?  And why did he listen to Jane?</p>
      <p>Award Winning Comix Artist Richard Cowdry, with Peter Lally, bring you the future....NOW!!!</p>
    </div>
  </main>

  <!-- Music -->
  <audio id="bgm" loop preload="auto">
    <source src="escape_loop_theme_9_Aug_25.ogg" type="audio/ogg">
    Your browser does not support the audio element.
  </audio>

  <!-- Toggle button (inline style so it always positions correctly) -->
  <button id="musicToggle" aria-pressed="true"
    style="position:fixed;left:50%;bottom:22px;transform:translateX(-50%);font-family:monospace;font-size:1rem;background:#222;color:#fff;border:1px solid #555;padding:10px 18px;cursor:pointer;border-radius:6px;z-index:10">
    ðŸ”Š Music: On
  </button>

  <script>
    const audio = document.getElementById('bgm');
    const btn   = document.getElementById('musicToggle');

    // Use one shared key across pages so user choice stays consistent site-wide
    const KEY = 'siteBgmPref'; // 'on' | 'off' | null
    const pref = localStorage.getItem(KEY);

    function setButton(isOn){
      btn.textContent = isOn ? 'ðŸ”Š Music: On' : 'ðŸ”‡ Music: Off';
      btn.setAttribute('aria-pressed', isOn ? 'true' : 'false');
    }

    async function startMusic(){
      if (pref === 'off'){ setButton(false); return; }
      try{
        await audio.play();
        setButton(true);
        localStorage.setItem(KEY,'on');
      }catch{
        setButton(false); // autoplay blocked
      }
    }

    btn.addEventListener('click', async ()=>{
      if (audio.paused){
        try{
          await audio.play();
          setButton(true);
          localStorage.setItem(KEY,'on');
        }catch{}
      }else{
        audio.pause();
        setButton(false);
        localStorage.setItem(KEY,'off');
      }
    });

    document.addEventListener('DOMContentLoaded', startMusic);
  </script>
</body>
</html>
